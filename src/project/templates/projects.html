{% extends 'profile_base.html' %}

{% block title %}Your Projects{% endblock title %}

{% block content %}

<head>
    <script defer src="https://use.fontawesome.com/releases/v5.0.4/js/all.js" integrity="sha384-nVi8MaibAtVMFZb4R1zHUW/DsTJpG/YwPknbGABVOgk5s6Vhopl6XQD/pTCG/DKB" crossorigin="anonymous"></script>
    <!-- added for date picker -->
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>

<script>
$(document).ready(function() {
    $('.datepicker').datepicker({
        changeMonth: true,
        changeYear: true,
        yearRange: "1900:2050",
        defaultDate: new Date(),});

    $("#id_title").attr('placeholder', '{{project_form.title.label}}');
});
</script>

<div class="container">
    <h1>Your Projects</h1>
    <p>This is a way to collaborate on and submit projects you're working on to play on-air</p>
</div>

<div class="container">
    <table class="table">
    {% for project in userprofile.project_set.all %}
        <tr class="row">
            <td>
                <span class="title">
                    <a href="{{ project.get_absolute_url }}">
                        {{ project.title }}
                    </a>
                </span>
                <span class="info">
                    Created: {{ project.created }} <br/>
                    Estimated completion: {{ project.expected_completion_date }}
                </span>
            </td>
            <td class="right">
                {{ project.number_of_submissions }} submission(s)
            </td>
        </tr>
    {% endfor %}
    </table>
</div>

<div class="container">
    <h2>Create a new project:</h2>
    <form action="" method="post">
        {% csrf_token %}
        <div class = "wrapper">
            <i class="fas fa-pencil-alt" id="fa-icon"></i>
            {{ project_form.title }}
        </div>
        <br>
        <div class = "wrapper">
            <i class="fa fa-calendar" id="fa-icon"></i>
            {{ project_form.expected_completion_date }}
            <p id="pass-help">Expected completion date</p>
        </div>
        <br>
        <input type="submit" class="button green-bg" value="Create New Project" style="width:100%"/>
    </form>
</div>

{% endblock content %}
